# νμΌ κµ¬μ΅° μ”μ•½

## π“ νμΌ κµ¬μ΅°

### `persona/persona.py` - μ›λ³Έ λ²„μ „
- **μ—­ν• **: μ›λ³Έ Persona μ‘λ‹µ μƒμ„± μ½”λ“
- **μ£Όμ” ν•¨μ**: `generate_structured_persona_reply()`
- **νΉμ§•**:
  - `llm_chat()` ν•¨μ μ‚¬μ© (core.utils)
  - Few-shot μμ  μ—†μ
  - `max_tokens=700`
  - λ΅κΉ… μ—†μ
  - λ©”μ‹μ§€ μ: 3κ°

### `persona/persona_optimized.py` - μµμ ν™” λ²„μ „
- **μ—­ν• **: μµμ ν™”λ Persona μ‘λ‹µ μƒμ„± μ½”λ“
- **μ£Όμ” ν•¨μ**: `generate_structured_persona_reply_optimized()`
- **νΉμ§•**:
  - `optimized_llm_chat()` ν•¨μ μ‚¬μ© (μ§μ ‘ κµ¬ν„)
  - Few-shot μμ  2κ° μ¶”κ°€
  - `max_tokens=400`
  - λ΅κΉ… λ° λ©”νƒ€λ°μ΄ν„° λ°ν™
  - λ©”μ‹μ§€ μ: 7κ°
  - ν† ν° μ¶”μ • κΈ°λ¥
  - μ„±λ¥ μΈ΅μ • κΈ°λ¥

## π” μ£Όμ” μ°¨μ΄μ 

| ν•­λ© | μ›λ³Έ (`persona.py`) | μµμ ν™” (`persona_optimized.py`) |
|------|---------------------|--------------------------------|
| **ν•¨μλ…** | `generate_structured_persona_reply()` | `generate_structured_persona_reply_optimized()` |
| **LLM νΈμ¶** | `llm_chat()` (core.utils) | `optimized_llm_chat()` (μ§μ ‘ κµ¬ν„) |
| **Few-shot** | μ—†μ | 2κ° μμ  μ¶”κ°€ |
| **λ©”μ‹μ§€ μ** | 3κ° | 7κ° |
| **max_tokens** | 700 | 400 |
| **λ΅κΉ…** | μ—†μ | μμ (PERSONA_LOGGER) |
| **λ©”νƒ€λ°μ΄ν„°** | λ°ν™ μ• ν•¨ | λ°ν™ν•¨ (latency, tokens λ“±) |
| **ν† ν° μ¶”μ •** | μ—†μ | μμ (tiktoken μ‚¬μ©) |
| **μ¤νΈλ¦¬λ°** | μ§€μ› μ• ν•¨ | μ§€μ›ν•¨ (stream νλΌλ―Έν„°) |

## π“ μ„±λ¥ λΉ„κµ

| ν•­λ© | μ›λ³Έ | μµμ ν™” | κ°μ„  |
|------|------|--------|------|
| ν‰κ·  μ‘λ‹µ μ‹κ°„ | 4.616μ΄ | 3.178μ΄ | **+31.1% λΉ λ¦„** |
| ν‘μ¤€νΈμ°¨ | 0.740μ΄ | 0.276μ΄ | **62.7% κ°μ†** |
| λ©”μ‹μ§€ μ | 3κ° | 7κ° | +4κ° (Few-shot) |
| μ¶λ ¥ ν† ν° | μΈ΅μ • μ• λ¨ | ν‰κ·  124κ° | - |

## π’΅ μ‚¬μ© λ°©λ²•

### μ›λ³Έ λ²„μ „ μ‚¬μ©
```python
from persona.persona import generate_structured_persona_reply

response = generate_structured_persona_reply(
    user_input="μΈν”λ μ΄μ…μ΄ λ­μ•Ό?",
    term="μΈν”λ μ΄μ…"
)
# λ°ν™: str (μ‘λ‹µ ν…μ¤νΈλ§)
```

### μµμ ν™” λ²„μ „ μ‚¬μ©
```python
from persona.persona_optimized import generate_structured_persona_reply_optimized

response, metadata = generate_structured_persona_reply_optimized(
    user_input="μΈν”λ μ΄μ…μ΄ λ­μ•Ό?",
    term="μΈν”λ μ΄μ…"
)
# λ°ν™: tuple[str, dict] (μ‘λ‹µ ν…μ¤νΈ + λ©”νƒ€λ°μ΄ν„°)
# metadataμ—λ” latency, tokens, model μ •λ³΄ λ“± ν¬ν•¨
```

## π― μ–Έμ  μ–΄λ–¤ λ²„μ „μ„ μ‚¬μ©ν• κΉ?

### μ›λ³Έ λ²„μ „ (`persona.py`) μ‚¬μ© μ‹κΈ°
- β… κ°„λ‹¨ν• μ‘λ‹µλ§ ν•„μ”ν•  λ•
- β… λ©”νƒ€λ°μ΄ν„°κ°€ ν•„μ” μ—†μ„ λ•
- β… κΈ°μ΅΄ μ½”λ“μ™€μ νΈν™μ„± μ μ§€κ°€ ν•„μ”ν•  λ•

### μµμ ν™” λ²„μ „ (`persona_optimized.py`) μ‚¬μ© μ‹κΈ°
- β… μ„±λ¥ μΈ΅μ •μ΄ ν•„μ”ν•  λ•
- β… ν† ν° μ‚¬μ©λ‰μ„ μ¶”μ ν•΄μ•Ό ν•  λ•
- β… λ” λΉ λ¥Έ μ‘λ‹µμ΄ ν•„μ”ν•  λ•
- β… μ¤νΈλ¦¬λ°μ΄ ν•„μ”ν•  λ•
- β… λ΅κΉ…μ΄ ν•„μ”ν•  λ•

## π“ μ°Έκ³ 

- λ‘ λ²„μ „ λ¨λ‘ λ™μΌν• μ‘λ‹µ ν’μ§μ„ μ μ§€ν•©λ‹λ‹¤
- μµμ ν™” λ²„μ „μ΄ λ” λΉ λ¥΄κ³  μ•μ •μ μ…λ‹λ‹¤
- μµμ ν™” λ²„μ „μ€ μ¶”κ°€ κΈ°λ¥(λ΅κΉ…, λ©”νƒ€λ°μ΄ν„°)μ„ μ κ³µν•©λ‹λ‹¤

